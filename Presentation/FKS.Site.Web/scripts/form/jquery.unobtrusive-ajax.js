/*! fks 07-07-2014 */
!function(a){function b(a,b){for(var c=window,d=(a||"").split(".");c&&d.length;)c=c[d.shift()];return"function"==typeof c?c:(b.push(a),Function.constructor.apply(null,b))}function c(a){return"GET"===a||"POST"===a}function d(a,b){c(b)||a.setRequestHeader("X-HTTP-Method-Override",b)}function e(b,c,d){var e;-1===d.indexOf("application/x-javascript")&&(e=(b.getAttribute("data-ajax-mode")||"").toUpperCase(),a(b.getAttribute("data-ajax-update")).each(function(b,d){var f;switch(e){case"BEFORE":f=d.firstChild,a("<div />").html(c).contents().each(function(){d.insertBefore(this,f)});break;case"AFTER":a("<div />").html(c).contents().each(function(){d.appendChild(this)});break;default:a(d).html(c)}}))}function f(f,g){var h,i,j,k;h=f.getAttribute("data-ajax-confirm"),(!h||window.confirm(h))&&(i=a(f.getAttribute("data-ajax-loading")),k=f.getAttribute("data-ajax-loading-duration")||0,a.extend(g,{type:f.getAttribute("data-ajax-method")||void 0,url:f.getAttribute("data-ajax-url")||void 0,beforeSend:function(a){var c;return d(a,j),c=b(f.getAttribute("data-ajax-begin"),["xhr"]).apply(this,arguments),c!==!1&&i.show(k),c},complete:function(){i.hide(k),b(f.getAttribute("data-ajax-complete"),["xhr","status"]).apply(this,arguments)},success:function(a,c,d){e(f,a,d.getResponseHeader("Content-Type")||"text/html"),b(f.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(this,arguments)},error:b(f.getAttribute("data-ajax-failure"),["xhr","status","error"])}),g.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),j=g.type.toUpperCase(),c(j)||(g.type="POST",g.data.push({name:"X-HTTP-Method-Override",value:j})),a.ajax(g))}function g(b){var c=a(b).data(i);return!c||!c.validate||c.validate()}var h="unobtrusiveAjaxClick",i="unobtrusiveValidation";a(document).on("click","a[data-ajax=true]",function(a){a.preventDefault(),f(this,{url:this.href,type:"GET",data:[]})}),a(document).on("click","form[data-ajax=true] input[type=image]",function(b){var c=b.target.name,d=a(b.target),e=d.parents("form")[0],f=d.offset();a(e).data(h,[{name:c+".x",value:Math.round(b.pageX-f.left)},{name:c+".y",value:Math.round(b.pageY-f.top)}]),setTimeout(function(){a(e).removeData(h)},0)}),a(document).on("click","form[data-ajax=true] :submit",function(b){var c=b.target.name,d=a(b.target).parents("form")[0];a(d).data(h,c?[{name:c,value:b.target.value}]:[]),setTimeout(function(){a(d).removeData(h)},0)}),a(document).on("submit","form[data-ajax=true]",function(b){var c=a(this).data(h)||[];b.preventDefault(),g(this)&&f(this,{url:this.action,type:this.method||"GET",data:c.concat(a(this).serializeArray())})})}(jQuery);